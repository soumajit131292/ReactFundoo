{"ast":null,"code":"import _classCallCheck from \"/home/soumajit/ReactProjectFundoo/fundoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/soumajit/ReactProjectFundoo/fundoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/soumajit/ReactProjectFundoo/fundoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/soumajit/ReactProjectFundoo/fundoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/soumajit/ReactProjectFundoo/fundoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/soumajit/ReactProjectFundoo/fundoo/src/Components/Dashboard/collaborator.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport PersonAddOutlinedIcon from '@material-ui/icons/PersonAddOutlined';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { ClickAwayListener } from '@material-ui/core';\nimport { getLoggedUser } from '../../Controller/Usercontroller';\nimport Button from '@material-ui/core/Button';\nimport { InputBase, Card, Tooltip, TextField, Snackbar, IconButton } from '@material-ui/core';\nimport { collaboratorAdd, collaboratorDelete } from '../../Controller/colabController';\nimport DoneOutlinedIcon from '@material-ui/icons/DoneOutlined';\nimport Chip from '@material-ui/core/Chip';\nimport { getColabUser } from '../../Controller/NoteController';\nimport ClearOutlinedIcon from '@material-ui/icons/ClearOutlined';\n\nvar Collaborator =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Collaborator, _Component);\n\n  function Collaborator(props) {\n    var _this;\n\n    _classCallCheck(this, Collaborator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Collaborator).call(this, props));\n\n    _this.dialogOpenClose = function () {\n      _this.getColabUserDetails();\n\n      console.log(_this.colbaUserArray);\n\n      _this.setState({\n        open: !_this.state.open\n      });\n    };\n\n    _this.closeDialogfromAway = function () {\n      _this.setState({\n        open: !_this.state.open\n      });\n    };\n\n    _this.getUser = function () {\n      getLoggedUser().then(function (res) {\n        _this.setState({\n          firstName: res.data.firstName,\n          id: res.data.id,\n          lastName: res.data.lastName,\n          email: res.data.email\n        });\n      });\n    };\n\n    _this.getColabUserDetails = function () {\n      getColabUser(_this.props.noteId.id).then(function (res) {\n        console.log(res.data);\n\n        _this.setState({\n          colbaUserArray: res.data\n        });\n      });\n    };\n\n    _this.dialogReset = function () {\n      _this.setState({\n        view: !_this.state.view,\n        open: !_this.state.open\n      });\n    };\n\n    _this.snackBarClose = function () {\n      _this.setState({\n        Error: false\n      });\n    };\n\n    _this.onChangeEmailId = function (event) {\n      _this.setState({\n        emailId: event.target.value\n      });\n    };\n\n    _this.showIcon = function () {\n      _this.setState({\n        view: !_this.state.view\n      });\n    };\n\n    _this.saveColab = function () {\n      if (_this.state.emailId === '') {\n        _this.setState({\n          Error: true,\n          message: 'Please add email address',\n          chipOpen: !_this.state.open\n        });\n      } else if (!/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$/.test(_this.state.emailId)) {\n        _this.setState({\n          Error: true,\n          message: 'Please provide a valid email address'\n        });\n      } else {\n        var colabBody = {\n          \"emailId\": _this.state.emailId\n        };\n        collaboratorAdd(_this.state.emailId, _this.props.noteId.id).then(function (res) {\n          console.log(res.data.object);\n\n          _this.setState({\n            chipOpen: !_this.state.open\n          });\n        }).catch(function (res) {\n          _this.setState({\n            Error: true,\n            message: 'Please provide a valid email address',\n            open: !_this.state.open,\n            view: !_this.state.view\n          });\n        });\n      }\n    };\n\n    _this.dleteColaborator = function () {\n      console.log(_this.state.emailId);\n      collaboratorDelete(_this.state.emailId, _this.props.noteId.id).then(function (res) {\n        console.log(res.data.object);\n      });\n    };\n\n    _this.state = {\n      open: false,\n      firstName: '',\n      lastName: '',\n      email: '',\n      view: false,\n      emailId: '',\n      id: '',\n      openSnackBar: '',\n      Error: false,\n      message: \"\",\n      chipOpen: false,\n      colbaUserArray: []\n    };\n    return _this;\n  }\n\n  _createClass(Collaborator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUser();\n      this.getColabUserDetails();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Snackbar, {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"center\"\n        },\n        open: this.state.Error,\n        autoHideDuration: 6000,\n        onClose: this.snackBarClose,\n        message: this.state.message,\n        action: React.createElement(IconButton, {\n          onClick: this.snackBarClose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        title: \"Collaborator\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(PersonAddOutlinedIcon, {\n        onClick: this.dialogOpenClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      })), React.createElement(Dialog, {\n        open: this.state.open,\n        style: {\n          boxShadow: \"1px 1px 1px 1px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Collaborators\"), React.createElement(DialogContent, {\n        dividers: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, this.state.firstName, \" \", this.state.lastName, \" (Owner)\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), this.state.email, this.state.chipOpen ? null : this.state.colbaUserArray.map(function (colab) {\n        console.log('second    ', colab);\n        return React.createElement(\"div\", {\n          key: colab.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, colab.email, React.createElement(ClearOutlinedIcon, {\n          onClick: function onClick() {\n            return _this2.dleteColaborator(colab);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }));\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, !this.state.view ? React.createElement(InputBase, {\n        placeholder: \"add person\",\n        onClick: this.showIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }) : React.createElement(InputBase, {\n        type: \"email\",\n        placeholder: \"add person\",\n        value: this.state.emailId,\n        onChange: this.onChangeEmailId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), !this.state.view ? null : React.createElement(DoneOutlinedIcon, {\n        onClick: this.saveColab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.dialogReset,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(Button, {\n        onClick: this.saveColab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Save\"))));\n    }\n  }]);\n\n  return Collaborator;\n}(Component);\n\nexport default withRouter(Collaborator);","map":{"version":3,"sources":["/home/soumajit/ReactProjectFundoo/fundoo/src/Components/Dashboard/collaborator.jsx"],"names":["React","Component","withRouter","PersonAddOutlinedIcon","Dialog","DialogTitle","DialogContent","DialogActions","ClickAwayListener","getLoggedUser","Button","InputBase","Card","Tooltip","TextField","Snackbar","IconButton","collaboratorAdd","collaboratorDelete","DoneOutlinedIcon","Chip","getColabUser","ClearOutlinedIcon","Collaborator","props","dialogOpenClose","getColabUserDetails","console","log","colbaUserArray","setState","open","state","closeDialogfromAway","getUser","then","res","firstName","data","id","lastName","email","noteId","dialogReset","view","snackBarClose","Error","onChangeEmailId","event","emailId","target","value","showIcon","saveColab","message","chipOpen","test","colabBody","object","catch","dleteColaborator","openSnackBar","vertical","horizontal","boxShadow","map","colab"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport PersonAddOutlinedIcon from '@material-ui/icons/PersonAddOutlined';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { ClickAwayListener } from '@material-ui/core';\nimport { getLoggedUser } from '../../Controller/Usercontroller';\nimport Button from '@material-ui/core/Button';\nimport { InputBase, Card, Tooltip, TextField, Snackbar, IconButton } from '@material-ui/core';\nimport { collaboratorAdd ,collaboratorDelete } from '../../Controller/colabController';\nimport DoneOutlinedIcon from '@material-ui/icons/DoneOutlined';\nimport Chip from '@material-ui/core/Chip';\nimport { getColabUser  } from '../../Controller/NoteController';\nimport ClearOutlinedIcon from '@material-ui/icons/ClearOutlined';\n\nclass Collaborator extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            open: false,\n            firstName: '',\n            lastName: '',\n            email: '',\n            view: false,\n            emailId: '',\n            id: '',\n            openSnackBar: '',\n            Error: false,\n            message: \"\",\n            chipOpen: false,\n            colbaUserArray: [],\n        }\n    }\n\n    dialogOpenClose = () => {\n        this.getColabUserDetails()\n        console.log(this.colbaUserArray)\n        this.setState({\n            open: !this.state.open,\n\n        })\n    }\n    \n    closeDialogfromAway = () => {\n        this.setState({\n            open: !this.state.open\n        })\n    }\n\n    componentDidMount() {\n        this.getUser();\n        this.getColabUserDetails();\n    }\n    getUser = () => {\n        getLoggedUser().then((res) => {\n            this.setState({\n                firstName: res.data.firstName,\n                id: res.data.id,\n                lastName: res.data.lastName,\n                email: res.data.email,\n            })\n\n        })\n\n    }\n    getColabUserDetails=()=>{\n        getColabUser(this.props.noteId.id).then((res)=>{\n            console.log(res.data)\n            this.setState({\n                colbaUserArray: res.data\n            })\n            \n        })\n\n    }\n    dialogReset = () => {\n        this.setState({\n            view: !this.state.view,\n            open: !this.state.open\n        })\n    }\n    snackBarClose = () => {\n        this.setState({\n            Error: false\n        })\n    }\n    onChangeEmailId = (event) => {\n        this.setState({\n\n            emailId: event.target.value\n        })\n    }\n    showIcon = () => {\n        this.setState({\n            view: !this.state.view\n        })\n    }\n    saveColab = () => {\n        if(this.state.emailId==='')\n        {\n            this.setState({\n\n                Error: true,\n                message: 'Please add email address',\n                chipOpen: !this.state.open,\n            })\n        }\n       else if (!/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$/.test(this.state.emailId)) {\n            this.setState({\n\n                Error: true,\n                message: 'Please provide a valid email address'\n            })\n       }\n       else {\n        let colabBody = {\n            \"emailId\": this.state.emailId,\n\n        }\n        collaboratorAdd(this.state.emailId, this.props.noteId.id).then((res) => {\n            console.log(res.data.object);\n            this.setState({\n                chipOpen: !this.state.open,\n\n            })\n\n        }).catch((res) => {\n            this.setState({\n                Error: true,\n                message: 'Please provide a valid email address',\n                open: !this.state.open,\n                view: !this.state.view\n            })\n        })\n\n    }\n}\ndleteColaborator=()=>{\n    console.log(this.state.emailId)\n    collaboratorDelete(this.state.emailId, this.props.noteId.id).then((res)=>{\n        console.log(res.data.object)\n    })\n}\n\n\n    render() {\n       \n        return (\n            <div >\n                <Snackbar anchorOrigin={{\n                    vertical: \"bottom\",\n                    horizontal: \"center\"\n                }}\n                    open={this.state.Error}\n                    autoHideDuration={6000}\n                    onClose={this.snackBarClose}\n                    message={this.state.message}\n                    action={\n                        <IconButton\n                            onClick={this.snackBarClose}>\n                        </IconButton>\n                    } />\n                <Tooltip title=\"Collaborator\">\n                    <PersonAddOutlinedIcon onClick={this.dialogOpenClose} />\n                </Tooltip>\n\n\n                <Dialog open={this.state.open} style={{ boxShadow: \"1px 1px 1px 1px\" }} >\n\n                    <DialogTitle >\n                        Collaborators\n                    </DialogTitle>\n\n                    <DialogContent dividers >\n                        {this.state.firstName} {this.state.lastName} (Owner)<br />\n                        {this.state.email}\n                      \n                        {this.state.chipOpen ? null :\n                            this.state.colbaUserArray.map((colab) => {\n                                console.log('second    ',colab)\n\n                                return (<div key={colab.id}>\n                                    {colab.email}\n                                    <ClearOutlinedIcon onClick={()=>this.dleteColaborator(colab)}/>\n                                    {/* { <Chip label={colab.email} /> */}\n                                    </div>)}\n\n                            )\n                        }<br />\n                       \n\n                        <div>\n                            {!this.state.view ?\n                                <InputBase\n                                    placeholder=\"add person\"\n                                    onClick={this.showIcon}\n                                /> :\n                                <InputBase\n                                    type=\"email\"\n                                    placeholder=\"add person\"\n                                    value={this.state.emailId}\n                                    onChange={this.onChangeEmailId}\n                                />}\n                            {!this.state.view ? null : <DoneOutlinedIcon onClick={this.saveColab} />}\n                        </div>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.dialogReset} >\n                            Cancel\n                         </Button>\n                        <Button onClick={this.saveColab} >\n                            Save\n                        </Button>\n                    </DialogActions>\n\n                </Dialog>\n\n            </div>\n        )\n    }\n}\nexport default withRouter(Collaborator);"]},"metadata":{},"sourceType":"module"}